# ğŸ’»éƒ¨ç½²DEMOç«™ç‚¹ 
é€šè¿‡[PM2](http://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/)æˆ–è€…[Docker](https://docs.docker.com/get-started/)éƒ¨ç½²demoç«™ç‚¹åˆ°è‡ªå·±æœåŠ¡å™¨ä¸Š **ï¼ˆæ¨èdockerï¼‰**

#### nginxéœ€è¦æ ¹æ®è‡ªå·±å®é™…æƒ…å†µè¿›è¡Œä¿®æ”¹!ï¼ˆä¾‹å¦‚å„ç§æ—¥å¿—è·¯å¾„å’Œincludeè·¯å¾„ å¦åˆ™éƒ¨ç½²è‚¯å®šå¤±è´¥ï¼ï¼‰

### âœ…Dockeréƒ¨ç½²

Platform
  - linux

Requirements
  - nginx
  - docker
  - docker-compose

é…ç½®nginxæœåŠ¡
```bash
# ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•çš„nginx.confæ–‡ä»¶
server {
      listen 80 default_server;
      listen [::]:80 default_server;
      server_name wxredirect.jslab.fun; #è¿™é‡Œéœ€è¦é…ç½®æˆè‡ªå·±åŸŸå
      ...
      
server {
      listen 80;
      server_name api.jslab.fun; #è¿™é‡Œéœ€è¦é…ç½®æˆè‡ªå·±åŸŸå
```

```bash
# é¡¹ç›®æ ¹ç›®å½•
docker-compose up -d
# å®Œæˆä¹‹ååº”è¯¥ä¼šæœ‰å¦‚ä¸‹è¾“å‡º âœ…
Recreating wechat-redirect_web_1 ... done
# å¯åŠ¨nginxæœåŠ¡
nginx -s stop
nginx -c é¡¹ç›®æ ¹ç›®å½•/nginx.conf
# demoç½‘ç«™éƒ¨ç½²å®Œæ¯• ğŸ‘¨ğŸ¼â€ğŸ³
```

### âœ…PM2éƒ¨ç½²
Platform
  - linux

Requirements
  - nginx
  - nodejs [[doc]](https://nodejs.org)

åŒæ ·å…ˆé…ç½®nginxæœåŠ¡
```bash
# ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•çš„nginx.confæ–‡ä»¶
server {
      listen 80 default_server;
      listen [::]:80 default_server;
      server_name wxredirect.jslab.fun; #è¿™é‡Œéœ€è¦é…ç½®æˆè‡ªå·±åŸŸå

server {
      listen 80;
      server_name api.jslab.fun; #è¿™é‡Œéœ€è¦é…ç½®æˆè‡ªå·±åŸŸå
      ...
```

```bash
# å®‰è£…pm2
npm install -g pm2
# ç¼–è¯‘å‰ç«¯ä»£ç 
cd exmaple/front
npm install
npm run build
cd -  #å›åˆ°é¡¹ç›®æ ¹ç›®å½•
npm install

# å¯åŠ¨pm2å®ˆæŠ¤æœåŠ¡
pm2 start --env=production
# æˆåŠŸä¹‹åpm2ä¼šè¾“å‡ºç±»ä¼¼å¦‚ä¸‹ä¿¡æ¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ App name        â”‚ id â”‚ version â”‚ mode    â”‚ pid   â”‚ status â”‚ restart â”‚ uptime â”‚ cpu  â”‚ mem       â”‚ user â”‚ watching â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ WX REDIRECT API â”‚ 0  â”‚ 1.0.0   â”‚ cluster â”‚ 14585 â”‚ online â”‚ 0       â”‚ 0      â”‚ 0.2% â”‚ 48.6 MB   â”‚ root â”‚ disabled â”‚
â”‚ WX REDIRECT API â”‚ 1  â”‚ 1.0.0   â”‚ cluster â”‚ 14594 â”‚ online â”‚ 0       â”‚ 0      â”‚ 0.2% â”‚ 49.6 MB   â”‚ root â”‚ disabled â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
å¯åŠ¨nginxæœåŠ¡

```bash
nginx -s stop
nginx -c é¡¹ç›®æ ¹ç›®å½•/nginx.conf
```
